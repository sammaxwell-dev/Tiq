const a={apiKey:"",targetLang:"ru",model:"gpt-4o-mini",theme:"system",showBackdrop:!1,instantTranslation:!1,translationTone:"standard",translateMode:"inline"},l=50,h={get:async()=>{if(typeof chrome>"u"||!chrome.storage){const e=localStorage.getItem("lume_settings");return e?{...a,...JSON.parse(e)}:a}return await chrome.storage.sync.get(a)},set:async t=>{if(typeof chrome>"u"||!chrome.storage){const e=localStorage.getItem("lume_settings"),s=e?JSON.parse(e):a;localStorage.setItem("lume_settings",JSON.stringify({...s,...t}));return}await chrome.storage.sync.set(t)},onChange:t=>{if(typeof chrome>"u"||!chrome.storage)return()=>{};const e=(s,r)=>{r==="sync"&&h.get().then(t)};return chrome.storage.onChanged.addListener(e),()=>chrome.storage.onChanged.removeListener(e)}},m={get:async()=>{if(typeof chrome>"u"||!chrome.storage){const e=localStorage.getItem("lume_history");return e?JSON.parse(e):[]}return(await chrome.storage.local.get({history:[]})).history},add:async t=>{const e={...t,id:crypto.randomUUID(),timestamp:Date.now()};if(typeof chrome>"u"||!chrome.storage){const n=localStorage.getItem("lume_history"),c=n?JSON.parse(n):[],i=[e,...c].slice(0,l);localStorage.setItem("lume_history",JSON.stringify(i));return}const r=(await chrome.storage.local.get({history:[]})).history,o=[e,...r].slice(0,l);await chrome.storage.local.set({history:o})},clear:async()=>{if(typeof chrome>"u"||!chrome.storage){localStorage.removeItem("lume_history");return}await chrome.storage.local.set({history:[]})},remove:async t=>{if(typeof chrome>"u"||!chrome.storage){const o=localStorage.getItem("lume_history"),c=(o?JSON.parse(o):[]).filter(i=>i.id!==t);localStorage.setItem("lume_history",JSON.stringify(c));return}const r=(await chrome.storage.local.get({history:[]})).history.filter(o=>o.id!==t);await chrome.storage.local.set({history:r})}};export{a as D,m as h,h as s};
