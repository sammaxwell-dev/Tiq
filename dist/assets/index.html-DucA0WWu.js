import"./tailwind-BMV0Qa9f.js";import{r,j as e,B as j,L as N,d as S,c as w,R as k}from"./Button-Dlz1g6dN.js";import{S as v,a as y,I as C,X as T,C as I,b as L,K as A,M as K}from"./Input-DldoxaWi.js";import{s as x,D as E}from"./storage-Cz7dAfo5.js";const B=()=>{const[a,t]=r.useState("ru"),[c,n]=r.useState(!1),[m,l]=r.useState(!1);r.useEffect(()=>{x.get().then(s=>{t(s.targetLang),n(s.showBackdrop),l(s.instantTranslation)})},[]);const o=async s=>{t(s),await x.set({targetLang:s})},h=async s=>{const i=s.target.checked;n(i),await x.set({showBackdrop:i})},u=async s=>{const i=s.target.checked;l(i),await x.set({instantTranslation:i})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Language Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure your preferred languages for translation."}),e.jsx("div",{className:"grid gap-4 max-w-md",children:e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Target Language"}),e.jsx("div",{className:"col-span-2",children:e.jsxs(v,{value:a,onChange:s=>o(s.target.value),children:[e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"})]})})]})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Behavior"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Customize how the extension behaves."}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Show Backdrop"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Display a dark overlay behind the translation modal"})]}),e.jsx(y,{checked:c,onChange:h})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Instant Translation"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Automatically translate on icon click without opening modal first"})]}),e.jsx(y,{checked:m,onChange:u})]})]})]})]})};function M(){const[a,t]=r.useState(E),[c,n]=r.useState(!0);return r.useEffect(()=>{x.get().then(o=>{t(o),n(!1)});const l=x.onChange(o=>{t(o)});return()=>l()},[]),{settings:a,updateSettings:async l=>{t(o=>({...o,...l})),await x.set(l)},loading:c}}const P=()=>{const{settings:a,updateSettings:t,loading:c}=M(),[n,m]=r.useState(""),[l,o]=r.useState("gpt-3.5-turbo"),[h,u]=r.useState(!1),[s,i]=r.useState("idle"),[f,g]=r.useState("");r.useEffect(()=>{c||(m(a.apiKey),o(a.model))},[a,c]);const b=async()=>{if(i("checking"),g(""),!n.trim()){i("invalid"),g("Key cannot be empty");return}try{if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.sendMessage){const d=await chrome.runtime.sendMessage({type:"VALIDATE_API_KEY",payload:{key:n}});d&&d.success?(i("valid"),await t({apiKey:n,model:l})):(i("invalid"),g((d==null?void 0:d.error)||"Invalid API Key"))}else setTimeout(()=>{n.startsWith("sk-")?(i("valid"),t({apiKey:n,model:l})):(i("invalid"),g("Dev: Key must start with sk-"))},1e3)}catch{i("invalid"),g("Failed to validate key")}};return c?e.jsx("div",{children:"Loading settings..."}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"OpenAI Configuration"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Manage your API key and model settings."}),e.jsxs("div",{className:"space-y-4 max-w-lg",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{type:h?"text":"password",placeholder:"sk-...",value:n,onChange:d=>{m(d.target.value),i("idle")},className:s==="invalid"?"border-red-500 focus-visible:ring-red-500":""}),e.jsx(j,{variant:"outline",onClick:()=>u(!h),children:h?"Hide":"Show"})]}),s==="invalid"&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(T,{size:12})," ",f]}),s==="valid"&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(I,{size:12})," API Key verified and saved!"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Your key is stored locally and never shared."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(v,{value:l,onChange:d=>o(d.target.value),children:[e.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o mini (Recommended)"}),e.jsx("option",{value:"gpt-4o",children:"GPT-4o (Best Quality)"}),e.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo (Legacy)"}),e.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo (Legacy)"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(j,{onClick:b,disabled:s==="checking"||!n,children:[s==="checking"&&e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),s==="checking"?"Verifying...":"Verify & Save Key"]})})]})]})})},G=()=>{const[a,t]=r.useState("general"),c=()=>{switch(a){case"general":return e.jsx(B,{});case"openai":return e.jsx(P,{});case"appearance":return e.jsx("div",{className:"p-4",children:"Appearance Settings (Coming Soon)"});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 flex font-sans text-gray-900",children:[e.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold",children:"T"}),e.jsx("span",{className:"font-bold text-xl tracking-tight",children:"Lume"})]}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[e.jsx(p,{icon:e.jsx(L,{size:18}),label:"General",active:a==="general",onClick:()=>t("general")}),e.jsx(p,{icon:e.jsx(A,{size:18}),label:"OpenAI",active:a==="openai",onClick:()=>t("openai")}),e.jsx(p,{icon:e.jsx(K,{size:18}),label:"Appearance",active:a==="appearance",onClick:()=>t("appearance")})]}),e.jsx("div",{className:"p-4 border-t border-gray-100 text-xs text-gray-400 text-center",children:"Version 0.0.1"})]}),e.jsx("main",{className:"flex-1 p-8 overflow-auto",children:e.jsx("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 min-h-[500px] p-8",children:c()})})]})},p=({icon:a,label:t,active:c,onClick:n})=>e.jsxs("button",{onClick:n,className:S("w-full flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",c?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[a,e.jsx("span",{children:t})]});w.createRoot(document.getElementById("root")).render(e.jsx(k.StrictMode,{children:e.jsx(G,{})}));
