import"./tailwind-fFeVc1ZM.js";import{e as v,r,j as e,d as h,L as f,B as g,c as z,R as C}from"./Button-Dlz1g6dN.js";import{b as M,M as k,K as L,I as E,X as A,C as K,S as b,a as w}from"./Input-DldoxaWi.js";import{L as I,S as N,C as R}from"./sparkles-BSOUj1E2.js";import{s as j}from"./storage-DIGbv6aW.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=v("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=v("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=v("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),S=r.forwardRef(({className:t,...i},a)=>e.jsx("textarea",{className:h("flex min-h-[80px] w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 glass-input resize-none",t),ref:a,...i}));S.displayName="Textarea";const D=({className:t,size:i=24})=>e.jsx("div",{className:h("flex justify-center items-center p-2",t),children:e.jsx(f,{className:"animate-spin text-blue-600",size:i})}),G=({activeTab:t,onTabChange:i,className:a})=>e.jsxs("div",{className:h("flex items-center justify-center gap-1 p-1.5 glass rounded-full mx-auto w-fit shadow-lg backdrop-blur-xl bg-white/80 dark:bg-black/80 border border-white/20",a),children:[e.jsxs("button",{onClick:()=>i("translate"),className:h("flex items-center gap-2 px-5 py-2 rounded-full transition-all duration-300 text-sm font-medium relative overflow-hidden",t==="translate"?"bg-black text-white shadow-md scale-105":"text-muted-foreground hover:text-foreground hover:bg-black/5 dark:hover:bg-white/10"),children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:"Translate"})]}),e.jsxs("button",{onClick:()=>i("settings"),className:h("flex items-center gap-2 px-5 py-2 rounded-full transition-all duration-300 text-sm font-medium",t==="settings"?"bg-black text-white shadow-md scale-105":"text-muted-foreground hover:text-foreground hover:bg-black/5 dark:hover:bg-white/10"),children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:"Settings"})]})]}),_=()=>{const[t,i]=r.useState(null),[a,x]=r.useState(""),[d,m]=r.useState(!1),[n,l]=r.useState("idle"),[u,o]=r.useState("");r.useEffect(()=>{j.get().then(s=>{i(s),x(s.apiKey)})},[]);const c=async(s,y)=>{if(!t)return;const T={...t,[s]:y};i(T),await j.set({[s]:y})},p=async()=>{if(l("checking"),o(""),!a.trim()){l("invalid"),o("Key cannot be empty");return}try{if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.sendMessage){const s=await chrome.runtime.sendMessage({type:"VALIDATE_API_KEY",payload:{key:a}});s&&s.success?(l("valid"),await c("apiKey",a)):(l("invalid"),o((s==null?void 0:s.error)||"Invalid API Key"))}else setTimeout(()=>{a.startsWith("sk-")?(l("valid"),c("apiKey",a)):(l("invalid"),o("Dev: Key must start with sk-"))},1e3)}catch{l("invalid"),o("Failed to validate key")}};return t?e.jsxs("div",{className:"flex flex-col h-full overflow-y-auto p-6 space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[e.jsx(k,{size:14})," Appearance"]}),e.jsx("div",{className:"bg-white/50 dark:bg-white/5 rounded-xl p-1 flex gap-1 border border-gray-200 dark:border-white/10",children:["light","dark","system"].map(s=>e.jsxs("button",{onClick:()=>c("theme",s),className:h("flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all duration-200",t.theme===s?"bg-white dark:bg-white/20 text-blue-600 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/10"),children:[s==="light"&&e.jsx(V,{size:16}),s==="dark"&&e.jsx(P,{size:16}),s==="system"&&e.jsx(k,{size:16}),e.jsx("span",{className:"capitalize",children:s})]},s))})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[e.jsx(L,{size:14})," AI Configuration"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-foreground dark:text-gray-200",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{type:d?"text":"password",placeholder:"sk-...",value:a,onChange:s=>{x(s.target.value),l("idle")},className:h("bg-white/50 dark:bg-white/5",n==="invalid"?"border-red-500 focus-visible:ring-red-500":"")}),e.jsx(g,{variant:"outline",size:"icon",onClick:()=>m(!d),className:"shrink-0",children:d?e.jsx("span",{className:"text-xs",children:"Hide"}):e.jsx("span",{className:"text-xs",children:"Show"})})]}),n==="invalid"&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1 animate-in slide-in-from-top-1",children:[e.jsx(A,{size:12})," ",u]}),n==="valid"&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1 animate-in slide-in-from-top-1",children:[e.jsx(K,{size:12})," Verified & Saved"]}),e.jsxs(g,{onClick:p,disabled:n==="checking"||!a,className:"w-full",variant:n==="valid"?"outline":"default",children:[n==="checking"&&e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),n==="checking"?"Verifying...":"Verify & Save Key"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-foreground dark:text-gray-200",children:"Model"}),e.jsxs(b,{value:t.model,onChange:s=>c("model",s.target.value),className:"bg-white/50 dark:bg-white/5",children:[e.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o mini (Recommended)"}),e.jsx("option",{value:"gpt-4o",children:"GPT-4o (Best Quality)"}),e.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo (Legacy)"})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[e.jsx(N,{size:14})," Behavior"]}),e.jsxs("div",{className:"space-y-4 bg-white/30 dark:bg-white/5 rounded-xl p-4 border border-gray-200 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-sm font-medium text-foreground dark:text-gray-200",children:"Instant Translation"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Translate immediately on click"})]}),e.jsx(w,{checked:t.instantTranslation,onChange:s=>c("instantTranslation",s.target.checked)})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-white/10"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-sm font-medium text-foreground dark:text-gray-200",children:"Show Backdrop"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Dim background when open"})]}),e.jsx(w,{checked:t.showBackdrop,onChange:s=>c("showBackdrop",s.target.checked)})]})]})]})]}):e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(f,{className:"animate-spin text-blue-500"})})},F=()=>{const[t,i]=r.useState(""),[a,x]=r.useState(""),[d,m]=r.useState(!1),[n,l]=r.useState("translate"),[u,o]=r.useState("ru");r.useEffect(()=>{j.get().then(s=>{o(s.targetLang)})},[]);const c=async()=>{if(t.trim()){m(!0);try{if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.sendMessage){const s=await chrome.runtime.sendMessage({type:"TRANSLATE_REQUEST",payload:{text:t,targetLang:u}});s&&s.success?x(s.data):x((s==null?void 0:s.error)||"Error")}else setTimeout(()=>{x("Translated: "+t)},800)}catch(s){x("Error: "+s.message)}finally{m(!1)}}},p=()=>{navigator.clipboard.writeText(a)};return e.jsxs("div",{className:"w-[360px] h-[600px] bg-[#f0f2f5] dark:bg-[#1a1b1e] text-foreground flex flex-col font-sans relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[250px] h-[250px] bg-blue-400/30 rounded-full blur-[80px] pointer-events-none animate-pulse"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[250px] h-[250px] bg-purple-400/30 rounded-full blur-[80px] pointer-events-none animate-pulse",style:{animationDelay:"1s"}}),e.jsxs("header",{className:"flex items-center justify-between px-6 py-5 z-10",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-bold text-xl tracking-tight text-foreground dark:text-white",children:"Tippr"})})}),e.jsx("div",{className:"p-2 bg-white/40 dark:bg-white/10 rounded-full backdrop-blur-md border border-white/20 shadow-sm",children:e.jsx(N,{className:"w-4 h-4 text-blue-500 dark:text-blue-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-24 z-10 scrollbar-hide",children:n==="settings"?e.jsx("div",{className:"glass-card rounded-[2rem] p-1 animate-in slide-in-from-right-4 fade-in duration-300",children:e.jsx(_,{})}):e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-left-4 fade-in duration-300",children:[e.jsxs("div",{className:"glass rounded-full p-1.5 flex items-center justify-between gap-2 shadow-sm",children:[e.jsxs(b,{className:"border-0 bg-transparent shadow-none h-9 text-sm font-medium focus:ring-0 text-center",children:[e.jsx("option",{value:"auto",children:"Detect Language"}),e.jsx("option",{value:"en",children:"English"})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/50 dark:bg-white/10 flex items-center justify-center shrink-0",children:e.jsx(B,{size:14,className:"text-muted-foreground"})}),e.jsxs(b,{className:"border-0 bg-transparent shadow-none h-9 text-sm font-medium focus:ring-0 text-center",value:u,onChange:s=>o(s.target.value),children:[e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(S,{placeholder:"What would you like to translate?",className:"min-h-[140px] resize-none bg-white/60 dark:bg-black/20 border-0 shadow-sm focus:ring-0 focus:bg-white/80 dark:focus:bg-black/40 transition-all text-base p-5 rounded-[1.5rem] backdrop-blur-sm placeholder:text-muted-foreground/50",value:t,onChange:s=>i(s.target.value)})}),e.jsx(g,{onClick:c,disabled:d||!t,className:"w-full rounded-full bg-black dark:bg-white text-white dark:text-black hover:bg-black/80 dark:hover:bg-white/90 h-12 shadow-lg hover:shadow-xl transition-all hover:scale-[1.02] active:scale-95 font-semibold text-base",children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Translating..."})]}):"Translate"}),(a||d)&&e.jsxs("div",{className:"relative p-5 bg-white/70 dark:bg-black/30 border border-white/40 dark:border-white/10 rounded-[1.5rem] min-h-[120px] shadow-sm backdrop-blur-md animate-in slide-in-from-bottom-4 fade-in duration-500",children:[d?e.jsx("div",{className:"flex flex-col items-center justify-center h-full py-4 space-y-3 opacity-50",children:e.jsxs("div",{className:"w-full space-y-2",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded-full w-3/4 animate-pulse"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full w-1/2 animate-pulse"})]})}):e.jsx("p",{className:"text-base text-foreground leading-relaxed font-medium",children:a}),!d&&a&&e.jsx(g,{variant:"ghost",size:"icon",onClick:p,className:"absolute bottom-3 right-3 h-8 w-8 rounded-full bg-white/50 hover:bg-white shadow-sm transition-all",children:e.jsx(R,{size:14,className:"text-foreground/70"})})]})]})}),e.jsx("div",{className:"absolute bottom-6 left-0 right-0 z-20 flex justify-center",children:e.jsx(G,{activeTab:n,onTabChange:l})})]})};z.createRoot(document.getElementById("root")).render(e.jsx(C.StrictMode,{children:e.jsx(F,{})}));
