import"./tailwind-C3bWV31a.js";import{d as u,r,j as e,e as j,S as b,B as v,L as S,f as C,c as T,R as I}from"./Select-BkKUpfX4.js";import{s as x,D as L}from"./storage-DaJmYFgk.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=u("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=u("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=u("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=u("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),y=r.forwardRef(({className:a,...t},i)=>e.jsxs("label",{className:j("relative inline-flex items-center cursor-pointer",a),children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",ref:i,...t}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}));y.displayName="Switch";const M=()=>{const[a,t]=r.useState("ru"),[i,n]=r.useState(!1),[h,c]=r.useState(!1);r.useEffect(()=>{x.get().then(s=>{t(s.targetLang),n(s.showBackdrop),c(s.instantTranslation)})},[]);const o=async s=>{t(s),await x.set({targetLang:s})},m=async s=>{const l=s.target.checked;n(l),await x.set({showBackdrop:l})},p=async s=>{const l=s.target.checked;c(l),await x.set({instantTranslation:l})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Language Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure your preferred languages for translation."}),e.jsx("div",{className:"grid gap-4 max-w-md",children:e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Target Language"}),e.jsx("div",{className:"col-span-2",children:e.jsxs(b,{value:a,onChange:s=>o(s.target.value),children:[e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"})]})})]})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Behavior"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Customize how the extension behaves."}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Show Backdrop"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Display a dark overlay behind the translation modal"})]}),e.jsx(y,{checked:i,onChange:m})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Instant Translation"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Automatically translate on icon click without opening modal first"})]}),e.jsx(y,{checked:h,onChange:p})]})]})]})]})},k=r.forwardRef(({className:a,type:t,...i},n)=>e.jsx("input",{type:t,className:j("flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 glass-input",a),ref:n,...i}));k.displayName="Input";function z(){const[a,t]=r.useState(L),[i,n]=r.useState(!0);return r.useEffect(()=>{x.get().then(o=>{t(o),n(!1)});const c=x.onChange(o=>{t(o)});return()=>c()},[]),{settings:a,updateSettings:async c=>{t(o=>({...o,...c})),await x.set(c)},loading:i}}const P=()=>{const{settings:a,updateSettings:t,loading:i}=z(),[n,h]=r.useState(""),[c,o]=r.useState("gpt-3.5-turbo"),[m,p]=r.useState(!1),[s,l]=r.useState("idle"),[N,g]=r.useState("");r.useEffect(()=>{i||(h(a.apiKey),o(a.model))},[a,i]);const w=async()=>{if(l("checking"),g(""),!n.trim()){l("invalid"),g("Key cannot be empty");return}try{if(typeof chrome<"u"&&chrome.runtime&&chrome.runtime.sendMessage){const d=await chrome.runtime.sendMessage({type:"VALIDATE_API_KEY",payload:{key:n}});d&&d.success?(l("valid"),await t({apiKey:n,model:c})):(l("invalid"),g((d==null?void 0:d.error)||"Invalid API Key"))}else setTimeout(()=>{n.startsWith("sk-")?(l("valid"),t({apiKey:n,model:c})):(l("invalid"),g("Dev: Key must start with sk-"))},1e3)}catch{l("invalid"),g("Failed to validate key")}};return i?e.jsx("div",{children:"Loading settings..."}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"OpenAI Configuration"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Manage your API key and model settings."}),e.jsxs("div",{className:"space-y-4 max-w-lg",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{type:m?"text":"password",placeholder:"sk-...",value:n,onChange:d=>{h(d.target.value),l("idle")},className:s==="invalid"?"border-red-500 focus-visible:ring-red-500":""}),e.jsx(v,{variant:"outline",onClick:()=>p(!m),children:m?"Hide":"Show"})]}),s==="invalid"&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(B,{size:12})," ",N]}),s==="valid"&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(A,{size:12})," API Key verified and saved!"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Your key is stored locally and never shared."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Model"}),e.jsxs(b,{value:c,onChange:d=>o(d.target.value),children:[e.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o mini (Recommended)"}),e.jsx("option",{value:"gpt-4o",children:"GPT-4o (Best Quality)"}),e.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo (Legacy)"}),e.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo (Legacy)"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(v,{onClick:w,disabled:s==="checking"||!n,children:[s==="checking"&&e.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}),s==="checking"?"Verifying...":"Verify & Save Key"]})})]})]})})},R=()=>{const[a,t]=r.useState("general"),i=()=>{switch(a){case"general":return e.jsx(M,{});case"openai":return e.jsx(P,{});case"appearance":return e.jsx("div",{className:"p-4",children:"Appearance Settings (Coming Soon)"});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 flex font-sans text-gray-900",children:[e.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold",children:"T"}),e.jsx("span",{className:"font-bold text-xl tracking-tight",children:"Tippr"})]}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[e.jsx(f,{icon:e.jsx(C,{size:18}),label:"General",active:a==="general",onClick:()=>t("general")}),e.jsx(f,{icon:e.jsx(K,{size:18}),label:"OpenAI",active:a==="openai",onClick:()=>t("openai")}),e.jsx(f,{icon:e.jsx(E,{size:18}),label:"Appearance",active:a==="appearance",onClick:()=>t("appearance")})]}),e.jsx("div",{className:"p-4 border-t border-gray-100 text-xs text-gray-400 text-center",children:"Version 0.0.1"})]}),e.jsx("main",{className:"flex-1 p-8 overflow-auto",children:e.jsx("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 min-h-[500px] p-8",children:i()})})]})},f=({icon:a,label:t,active:i,onClick:n})=>e.jsxs("button",{onClick:n,className:j("w-full flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",i?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[a,e.jsx("span",{children:t})]});T.createRoot(document.getElementById("root")).render(e.jsx(I.StrictMode,{children:e.jsx(R,{})}));
