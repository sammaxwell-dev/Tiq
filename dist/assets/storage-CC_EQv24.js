const a={apiKey:"",targetLang:"ru",model:"gpt-4o-mini",theme:"system",showBackdrop:!1,instantTranslation:!1,translationTone:"standard",translateMode:"inline"},l=50,h={get:async()=>{if(typeof chrome>"u"||!chrome.storage){const t=localStorage.getItem("tippr_settings");return t?{...a,...JSON.parse(t)}:a}return await chrome.storage.sync.get(a)},set:async e=>{if(typeof chrome>"u"||!chrome.storage){const t=localStorage.getItem("tippr_settings"),s=t?JSON.parse(t):a;localStorage.setItem("tippr_settings",JSON.stringify({...s,...e}));return}await chrome.storage.sync.set(e)},onChange:e=>{if(typeof chrome>"u"||!chrome.storage)return()=>{};const t=(s,o)=>{o==="sync"&&h.get().then(e)};return chrome.storage.onChanged.addListener(t),()=>chrome.storage.onChanged.removeListener(t)}},g={get:async()=>{if(typeof chrome>"u"||!chrome.storage){const t=localStorage.getItem("tippr_history");return t?JSON.parse(t):[]}return(await chrome.storage.local.get({history:[]})).history},add:async e=>{const t={...e,id:crypto.randomUUID(),timestamp:Date.now()};if(typeof chrome>"u"||!chrome.storage){const n=localStorage.getItem("tippr_history"),c=n?JSON.parse(n):[],i=[t,...c].slice(0,l);localStorage.setItem("tippr_history",JSON.stringify(i));return}const o=(await chrome.storage.local.get({history:[]})).history,r=[t,...o].slice(0,l);await chrome.storage.local.set({history:r})},clear:async()=>{if(typeof chrome>"u"||!chrome.storage){localStorage.removeItem("tippr_history");return}await chrome.storage.local.set({history:[]})},remove:async e=>{if(typeof chrome>"u"||!chrome.storage){const r=localStorage.getItem("tippr_history"),c=(r?JSON.parse(r):[]).filter(i=>i.id!==e);localStorage.setItem("tippr_history",JSON.stringify(c));return}const o=(await chrome.storage.local.get({history:[]})).history.filter(r=>r.id!==e);await chrome.storage.local.set({history:o})}};export{a as D,g as h,h as s};
